<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doubts</title>
    <link type="text/css" rel="stylesheet" href="styles.css">
</head>
<body>
<h1>Welcome to the Doubts WASM App</h1>
<div id="output"></div>
<script type="module">
    async function loadWasm() {
        try {
            const response = await fetch('composeApp.wasm');
            if (!response.ok) throw new Error('Failed to load WASM');
            const wasm = await response.arrayBuffer();

            const imports = {
                js_code: {
                    // Add any JavaScript functions that your WASM module needs here
                    print: (message) => {
                        document.getElementById('output').innerText += message + '\n';
                    }
                }
            };

            const { instance } = await WebAssembly.instantiate(wasm, imports);

            // Call an exported function from your WASM module
            if (instance.exports.main) {
                instance.exports.main(); // Ensure this function exists in your WASM
            } else {
                console.error('No exported main function found in WASM');
            }
        } catch (e) {
            console.error(e);
        }
    }

    window.onload = loadWasm;
</script>
</body>
</html>
